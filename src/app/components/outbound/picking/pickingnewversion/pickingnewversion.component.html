<div id="inBody" [dir]="direction">
	<div class="row">
		<div class="col-md-9">
		</div>
		<div class="col-md-3 text-right">
			<div class="udcBtns">


			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12" [hidden]="hideTaskDetails">
			<div class="top-input-label mt-2">
				<div class="row">
					<div class="col-md-12">
						<div class="row" [formGroup]="pickingPlanningForm">
							<div class="col-md-3">
								<div class="form-group row">
									<label class="col-sm-5 col-form-label">{{'Order Type' |translate}}</label>
									<div class="col-sm-7">
										<select class="form-control" formControlName="orderType"
											(change)="fetchwmsoNumbers($event.target.value,'FromFE')">
											<option *ngFor="let data of orderTypeDropdown" [value]="data">{{data}}
											</option>
										</select>
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-5 col-form-label">{{'SO Number' |translate}}</label>
									<div class="col-sm-7">
										<ng2-completer id="wmsoNumber" name="wmsoNumber" formControlName="wmsoNumber"
											[minSearchLength]="0" placeholder="{{'WMSO Number' |translate}}"
											[datasource]="WMSOs"
											(selected)="setWmsoNumber($event ? $event.originalObject:null)">
										</ng2-completer>
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-5 col-form-label">{{'Product' |translate}}</label>
									<div class="col-sm-7">
										<ng2-completer id="productIDName" name="productIDName"
											formControlName="productIDName" [minSearchLength]="0"
											placeholder="{{'Search Product' |translate}}" [datasource]="productIDs">
										</ng2-completer>
									</div>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group row">
									<label class="col-sm-3 col-form-label">{{'Zone' |translate}}</label>
									<div class="col-sm-8">
										<ng2-completer id="zoneName" name="zoneName" formControlName="zoneName"
											[datasource]="zoneIDs" [minSearchLength]="0"
											placeholder="{{'Zone' |translate}}" (selected)="fetchAllLocations()">
										</ng2-completer>
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-3 col-form-label">{{'Warehouse' |translate}}</label>
									<div class="col-sm-8">
										<ng2-completer id="wareHouseTransferDestinationInfoWareHouseIDName"
											name="wareHouseTransferDestinationInfoWareHouseIDName"
											formControlName="wareHouseTransferDestinationInfoWareHouseIDName"
											[minSearchLength]="0" placeholder="{{'Warehouse Name' |translate}}"
											[datasource]="wareHouseIds">
										</ng2-completer>
									</div>
								</div>
							</div>
							<div class="col-md-3">
								<div class="form-group row">
									<label class="col-sm-5 col-form-label">{{'Customer' |translate}}</label>
									<div class="col-sm-7">
										<ng2-completer id="customerIDName" name="customerIDName"
											formControlName="customerIDName" [datasource]="customerIDs"
											[minSearchLength]="0" placeholder="{{'Customer' |translate}}">
										</ng2-completer>
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-5 col-form-label">{{'Supplier' |translate}}</label>
									<div class="col-sm-7">
										<ng2-completer id="supplierIDName" name="supplierIDName"
											formControlName="supplierIDName" [minSearchLength]="0"
											placeholder="{{'Supplier Name' |translate}}" [datasource]="supplierIds">
										</ng2-completer>
									</div>
								</div>
							</div>
							<div class="col-md-2">
								<div class="form-group row">
									<label class="col-sm-3 col-form-label">{{'Location' |translate}}</label>
									<div class="col-sm-8">
										<ng2-completer id="locationName" name="locationName"
											formControlName="locationName" [datasource]=" locationIDs"
											[minSearchLength]="0" placeholder="{{'Location' |translate}}">
										</ng2-completer>
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-3 col-form-label">{{'Employee' |translate}}</label>
									<div class="col-sm-8">
										<ng2-completer id="executiveIDName" name="executiveIDName"
											formControlName="executiveIDName" [minSearchLength]="0"
											placeholder="{{'Search Employee' |translate}}"
											[datasource]="wareHouseTeamsListIDs">
										</ng2-completer>
									</div>
								</div>
							</div>
							<div class="col-md-1">
								<button class="btn-primary mt-1 mr-1" style="position: relative;left: 32px;"
									(click)="getDataForFilters()">{{'Filter' |translate}}</button>
								<button class="btn-info mt-1" (click)="resetOnly()"
									style="position: relative;left: 32px;">{{'Reset' |translate}}</button>

							</div>
						</div>
					</div>

				</div>
			</div>
			<div class="text-right">

			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12" [hidden]="hideTaskDetails">
			<div class="emptyBackGroun mt-2">
				<div class="row">
					<div class="col-md-3">
						<div class="form-group row">
							<label class="col-sm-5 col-form-label">{{'Assign Employee' |translate}}</label>
							<div class="col-sm-7">
								<ng2-completer [(ngModel)]="assignedEmployeeIDName"
									[ngModelOptions]="{standalone: true}" [minSearchLength]="0"
									placeholder="{{'Assign Employee' |translate}}" [datasource]="wareHouseTeamsListIDs">
								</ng2-completer>
							</div>
						</div>
					</div>
					<div class="col-md-3">
						<div class="form-group row">
							<label class="col-sm-7 col-form-label">{{'Planned Completion Date' |translate}}</label>
							<div class="col-sm-5">
								<input type="datetime-local" class="form-control" [(ngModel)]="completionDate"
									[ngModelOptions]="{standalone: true}" style="width:180px">
							</div>
						</div>
					</div>
					<div class="col-md-3 text-center" style="position: relative;left: 98px;">
						<button class="btn btn-primary mr-1" (click)="assignEmployeeforMulti()"
							[disabled]="!(completionDate || assignedEmployeeIDName)">{{'Assign' |translate}}</button>
						<button class="btn btn-primary mr-1" (click)="multiStart('startTime')">{{'Start'
							|translate}}</button>
						<button class="btn btn-primary" (click)="multiStart('status')">{{'Complete'
							|translate}}</button>
					</div>
					<div class="col-md-3 text-right">
						<!-- <button type="button" value="Picking History" (click)="naviagteToHistory()" title="History"
							style="background: none !important;border: none !important;">
							<img src="assets\Import.png" alt="" style="width: 25px;height: 23px;">
						</button> -->
						<i class="fa fa-table fa-2x" (click)="naviagteToHistory()" data-toggle="tooltip"
							title="History"></i>
						<button type="button" value="Download Excel" (click)="exportAsXLSX()" title="Download Excel"
							style="background: none !important;border: none !important;">
							<img src="assets\Import.png" alt="" style="width: 25px;height: 23px;">
						</button>
						<button type="button" (click)="generatePDF()" title="Print PDF"
							style="background: none !important;border: none !important;">
							<img src="assets/printpdf.png" alt=""
								style="width: 33px;height: 30px;margin-right: 12px;margin-top:5px">
						</button>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-12" *ngIf="hideTaskDetails">
			<div class="text-right">
				<i class="fa fa-table fa-2x" (click)="naviagteToHistory()" data-toggle="tooltip" title="History"></i>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="wmsDataTables">
				<div class="row">
					<div class="col-md-12">
						<div class="row">
							<div class="col-md-0.5 pr-0">
								<label class="mt-1">Show</label>
							</div>
							<div class="" style="top:-10px">
								<select [(ngModel)]="itemsPerPage" (change)="fetchAllPickingPlanningTableData(null,page=1)"
									class="form-control shortWidth" [ngModelOptions]="{standalone: true}">
									<option>5</option>
									<option>10</option>
									<option>25</option>
									<option>50</option>
								</select>
							</div>
							<div class="col-md-1 mt-1"><label>Entries</label>
							</div>
							<div class="col-md-9"></div>
							<div class="col-md-1" style="left: -20px;">
								<input type="text" [(ngModel)]="searchKey" placeholder="Search..."
									[ngModelOptions]="{standalone: true}"
									(keyup)="fetchAllPickingPlanningTableData(null,page=1)">
							</div>
						</div>
						<table class="table table-striped" style="overflow-y: auto;display: block;border-bottom: none;">
							<thead>
								<tr>
									<th scope="col">{{'S.No' |translate}}</th>
									<th>{{'Image'|translate}}</th>
									<th [hidden]="hideTaskDetails" scope="col">{{'Include' |translate}}<input
											type="checkbox" class="form-control" (click)="selectAllData($event)"
											[disabled]="makeThisDisable" [(ngModel)]="selectAllCheckboxValue"
											[ngModelOptions]="{standalone: true}">
									</th>
									<th *ngIf="barcodePermissionUser">Barcode</th>
									<!-- <th *ngIf="barcodePermissionUser">Product</th> -->
									<th scope="col">{{'SO Number' |translate}}</th>
									<th scope="col">{{'Picking Number' |translate}}</th>
									<th scope="col">{{'Status' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Planned Completion Date' |translate}}
									</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Start Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Assigned By' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Assigned To' |translate}}</th>
									<th scope="col">{{'Product ID' |translate}}</th>
									<th scope="col">{{'Product Name' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Product Description' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Brand Name' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'UOM' |translate}}</th>
									<th scope="col">{{'Quantity' |translate}}</th>
									<th scope="col" [hidden]="pickingQCConfig == 'No'">{{'Actual Picking Quantity'}}
									</th>
									<th scope="col">{{'Total Actual Picking Qty'}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Manufacturing Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Expiry Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Batch Number' |translate}}</th>
									<th scope="col">{{'Customer IDName/Warehouse IDName/Supplier IDName' |translate}}
									</th>
									<th [hidden]="thirdPartyCustomersCheckAllocation=='No'">{{'Customer CustomerName'
										|translate}}</th>
									<th [hidden]="thirdPartyCustomersCheckAllocation=='No'">{{'Customer CustomerAddress'
										|translate}}</th>

									<th scope="col">{{'Zone Name' |translate}}</th>
									<th scope="col">{{'Rack Name' |translate}}</th>
									<th scope="col">{{'Level Name' |translate}}</th>
									<th scope="col">{{'Column Name' |translate}}</th>
									<th scope="col">{{'Location Name' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Invoice Number' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Invoice Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'BOE No' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'BOE Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Bond Number' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Bond Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Ex Bond Number' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Ex Bond Date' |translate}}</th>
									<th scope="col" [hidden]="hideTaskDetails">{{'Created Date' |translate}}</th>
								</tr>
							</thead>
							<tbody>
								<tr
									*ngFor="let i=index;let data of pickingsList | paginate: {id:'foo',itemsPerPage: itemsPerPage,currentPage: page,totalItems: totalItems}">
									<td class="text-left">{{((page -1) * itemsPerPage)+i+1}}</td>
									<td *ngIf="data.productImageResource">
										<div class="tooltip-container">
											<img [src]="'data:image/jpg;base64,' + data.productImageResource"
												class="pImageIcon" alt="No Preview available"
												(mouseover)="showTooltip = true" (mouseleave)="showTooltip = false">
											<span *ngIf="showTooltip"
												class="tooltip-text">{{data.productMasterInfo.productName}}</span>
										</div>
									</td>
									<td *ngIf="!data.productImageResource">
										<div class="noImageIcon">
											<p class="noImageIconText">
												{{configService.getImageShortCut(data.productMasterInfo.productName)}}
											</p>
										</div>
									</td>
									<td [hidden]="hideTaskDetails"><input type="checkbox" [disabled]="makeThisDisable"
											[checked]="data.isChecked" (change)="onDocumentSelect($event,data)"></td>
									<td *ngIf="barcodePermissionUser">
										<span *ngIf="!data.startTime"><input type="text" class="form-control"
												[(ngModel)]="data.forLBarcode"
												(keypress)="islocationAvailable(($event ? $event.target.value : null),data)">
											<button _ngcontent-phh-c380="" type="button" title="Barcode"
												style="background: none !important; border: none !important;"><img
													src="assets\subMenusIcons\Barcode Scan.svg" alt=""
													(click)="openScanner(data,'location')"
													style="width: 33px; height: 28px; margin-top: 6px;"></button>
										</span>
										<span *ngIf="data.startTime">
											<input type="text" class="form-control" [(ngModel)]="data.forPBarcode"
												(keypress)="isProductAvailable(($event ? $event.target.value : null),data)">
											<button _ngcontent-phh-c380="" type="button" title="Barcode"
												style="background: none !important; border: none !important;"><img
													src="assets\subMenusIcons\Barcode Scan.svg" alt=""
													(click)="openScanner(data,'product')"
													style="width: 33px; height: 28px; margin-top: 6px;"></button>
										</span>
									</td>
									<td>{{data.fullWmsoNumber}}</td>
									<td>{{data.fullPickingNumber}}</td>
									<td><span *ngIf="data.status=='Closed' && data.startTime">Completed</span>
										<span *ngIf="data.status!='Closed' && data.startTime">
											<button class="btn btn-primary"
												(click)="onStatusChange('status',data)">Complete</button></span>
										<span *ngIf="!data.startTime"><button class="btn btn-primary"
												(click)="onStatusChange('startTime',data)">Start</button></span>
									</td>
									<td [hidden]="hideTaskDetails">
										<input type="datetime-local" class="form-control" [disabled]="makeThisDisable"
											[(ngModel)]="data.plannedCompletionDate"
											(change)="assignPlannedDate(data,$event.target.value)">
									</td>
									<td class="text-center" [hidden]="hideTaskDetails">{{data.startTime | date:
										'dd/MM/yyyy hh:mm:ss'}}</td>
									<td [hidden]="hideTaskDetails">{{data.pickingExecutive}} <br>{{data.assignedDate|
										date: 'dd/MM/yyyy hh:mm:ss'}}
									</td>
									<td *ngIf="data.wareHouseTeamInfo && data.wareHouseTeamInfo.executiveIDName!==null"
										[hidden]="hideTaskDetails">
										{{data.wareHouseTeamInfo.executiveIDName}}
										<i class="fa fa-times-circle" aria-hidden="true"
											(click)="intoEmployee(data)"></i>
									</td>
									<td [hidden]="hideTaskDetails"
										*ngIf="data.wareHouseTeamInfo==null ||(data.wareHouseTeamInfo && data.wareHouseTeamInfo.executiveIDName == null)">
										<select class="form-control" (change)="intoEmployee(data,$event.target.value)"
											[disabled]="makeThisDisable">
											<option value="null">Select</option>
											<option *ngFor="let user of wareHouseTeamsList"
												[value]="user.executiveIDName">
												{{user.executiveIDName}}</option>
										</select>
									</td>
									<td>{{data.productMasterInfo?.productID}}</td>
									<td>{{data.productMasterInfo?.productName}}</td>
									<td [hidden]="hideTaskDetails">{{data.productDescription}}</td>
									<td [hidden]="hideTaskDetails">{{data.brandName}}</td>
									<td [hidden]="hideTaskDetails" class="text-center">{{data.inventoryUnit}}</td>
									<td>{{data.pickedQuantity | decimalwithThreeDigits}}</td>
									<td [hidden]="pickingQCConfig == 'No'">
										<input class="form-control" [(ngModel)]="data.actualPickingQuantity"
											[ngModelOptions]="{standalone: true}"
											placeholder="{{'Actual Quantity' |translate}}" type="text"
											oninput="validity.valid||(value='')" min="0"
											(focusout)="updateActualQty(data,$event.target.value)">
									</td>
									<td>{{data.totalActualPickingQuantity}}</td>
									<td class="text-center" [hidden]="hideTaskDetails">{{data.mfgDate |
										date:'dd/MM/yyyy'}}</td>
									<td class="text-center" [hidden]="hideTaskDetails">{{data.expiryDate |
										date:'dd/MM/yyyy'}}</td>
									<td [hidden]="hideTaskDetails">{{data.batchNumber}}</td>
									<td>{{(data.orderType=='WareHouseTransfer' || data.orderType=='WareHouseTransfer
										Returns') ?
										(data.wareHouseTransferDestinationInfo?.wareHouseIDName) :
										(data.orderType=='Sales Order' ? (data.customerMasterInfo?.customerIDName) :
										(data.orderType=='Purchase Returns' ?
										(data.supplierMasterInfo?.supplierIDName):null))}}
									</td>
									<td [hidden]="thirdPartyCustomersCheckAllocation=='No'">
										{{data.customersCustomerName}}</td>
									<td [hidden]="thirdPartyCustomersCheckAllocation=='No'">
										{{data.customersCustomerAddress}}</td>

									<td>{{data.zoneInfo?.zoneName}}</td>
									<td>{{data.rackInfo?.rackName}}</td>
									<td>{{data.levelInfo?.levelName}}</td>
									<td>{{data.columnInfo?.columnName}}</td>
									<td>{{data.locationInfo?.locationName}}</td>
									<td [hidden]="hideTaskDetails">{{data.invoiceNumber}}</td>
									<td [hidden]="hideTaskDetails">{{data.invoiceDate | date: 'dd/MM/yyyy'}}</td>
									<td [hidden]="hideTaskDetails">{{data.billOfEntryNumber}}</td>
									<td [hidden]="hideTaskDetails">{{data.billOfEntryDate | date: 'dd/MM/yyyy'}}</td>
									<td [hidden]="hideTaskDetails">{{data.bondNumber}}</td>
									<td [hidden]="hideTaskDetails">{{data.bondDate | date: 'dd/MM/yyyy'}}</td>
									<td [hidden]="hideTaskDetails">{{data.exBondNumber}}</td>
									<td [hidden]="hideTaskDetails">{{data.exBondDate | date: 'dd/MM/yyyy'}}</td>
									<td [hidden]="hideTaskDetails" class="text-center">{{data.createdDate | date:
										'dd/MM/yyyy hh:mm:ss'}}</td>
								</tr>
							</tbody>
						</table>
						<div class="row mt-2" *ngIf="pickingsList.length>0">
							<div class="col-md-12" style="text-align: end;">
								<pagination-controls class="pagi" id="foo"
									(pageChange)="fetchAllPickingPlanningTableData(null,(page = $event))">
								</pagination-controls>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<app-barcodepopup [getBarcodeInfo]="barcodeInfo" (sendBarcodeConfirmation)="getBarcodeEvent($event)"></app-barcodepopup>
